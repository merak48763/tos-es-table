<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />

        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/14.0.0/material-components-web.min.css" />
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" />
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Rubik" />
        <link rel="stylesheet" type="text/css" href="./css/ui.css" />
        <link rel="stylesheet" type="text/css" href="/tool_data/stylesheet/fixed_board.css" />

        <!--<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/material-components-web/14.0.0/material-components-web.min.js"></script>
        <script src="/tool_data/js/fixed_board.js"></script>
        <script src="/tool_data/js/sum_of_products.js"></script>
        <script src="/tool_data/js/monster_icon.js"></script>
        <script src="./js/annotation_replacers.js"></script>
        <script src="./js/filter.js"></script>

        <title>神魔之塔 敵人技能表</title>
        <link rel="icon" type="image/png" href="/favicon/usodaro.png" />
        <meta name="description" content="查看神魔之塔敵人技能的工具" />
    </head>
    <body>
        <div id="loading_dialog">
            <div class="dialog-containter">
                <div class="dialog-text">資料載入中…</div>
            </div>
            <div class="dialog-scrim"></div>
        </div>
        <header>
            <label class="mdc-text-field mdc-text-field--filled" id="filter_input">
                <span class="mdc-text-field__ripple"></span>
                <span class="mdc-floating-label">搜尋</span>
                <input class="mdc-text-field__input" type="text" autocomplete="off" onkeyup="if(event.keyCode === 13) document.querySelector('#button_search').click()" />
                <span class="mdc-line-ripple"></span>
            </label>
            <div class="mdc-select mdc-select--filled" id="filter_preset">
                <div class="mdc-select__anchor" role="button">
                    <span class="mdc-select__ripple"></span>
                    <span class="mdc-floating-label">搜尋分類</span>
                    <span class="mdc-select__selected-text-container">
                        <span class="mdc-select__selected-text" id="preset_value"></span>
                    </span>
                    <span class="mdc-select__dropdown-icon">
                        <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false">
                            <polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                            <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                        </svg>
                    </span>
                    <span class="mdc-line-ripple"></span>
                </div>
                <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                    <ul class="mdc-list" role="listbox">
                        <li class="mdc-list-item mdc-list-item--selected" data-value="" role="option">
                            <span class="mdc-list-item__ripple"></span>
                        </li>
                        <li class="mdc-list-item" data-value="7360-7451" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">v2024.7</span>
                        </li>
                        <li class="mdc-list-item" data-value="0-499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES0 ~ ES499</span>
                        </li>
                        <li class="mdc-list-item" data-value="500-999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES500 ~ ES999</span>
                        </li>
                        <li class="mdc-list-item" data-value="1000-1499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES1000 ~ ES1499</span>
                        </li>
                        <li class="mdc-list-item" data-value="1500-1999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES1500 ~ ES1999</span>
                        </li>
                        <li class="mdc-list-item" data-value="2000-2499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES2000 ~ ES2499</span>
                        </li>
                        <li class="mdc-list-item" data-value="2500-2999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES2500 ~ ES2999</span>
                        </li>
                        <li class="mdc-list-item" data-value="3000-3499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES3000 ~ ES3499</span>
                        </li>
                        <li class="mdc-list-item" data-value="3500-3999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES3500 ~ ES3999</span>
                        </li>
                        <li class="mdc-list-item" data-value="4000-4499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES4000 ~ ES4499</span>
                        </li>
                        <li class="mdc-list-item" data-value="4500-4999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES4500 ~ ES4999</span>
                        </li>
                        <li class="mdc-list-item" data-value="5000-5499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES5000 ~ ES5499</span>
                        </li>
                        <li class="mdc-list-item" data-value="5500-5999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES5500 ~ ES5999</span>
                        </li>
                        <li class="mdc-list-item" data-value="6000-6499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES6000 ~ ES6499</span>
                        </li>
                        <li class="mdc-list-item" data-value="6500-6999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES6500 ~ ES6999</span>
                        </li>
                        <li class="mdc-list-item" data-value="7000-7499" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES7000 ~ ES7499</span>
                        </li>
<!--
                        <li class="mdc-list-item" data-value="7500-7999" role="option">
                            <span class="mdc-list-item__ripple"></span>
                            <span class="mdc-list-item__text">ES7500 ~ ES7999</span>
                        </li>
-->
                    </ul>
                </div>
            </div>
            <button class="mdc-button mdc-button--unelevated" id="button_search" onclick="searchES()">
                <span class="mdc-button__ripple"></span>
                <span class="mdc-button__label">搜尋</span>
            </button>
            <div class="hfill"></div>
            <div class="mdc-tooltip-wrapper--rich">
                <button class="mdc-icon-button material-icons-outlined" data-tooltip-id="info_tooltip" id="info_icon">
                    <span class="mdc-icon-button__ripple"></span>
                    info
                </button>
                <div class="mdc-tooltip mdc-tooltip--rich" data-mdc-tooltip-persistent="true" role="dialog" id="info_tooltip" tabindex="-1"><div class="mdc-tooltip__surface mdc-tooltip__surface-animation">
                    <h2 class="mdc-tooltip__title">資料版本</h2>
                    <p class="mdc-tooltip__content">
                        遊戲版本：<span id="last_update_version"></span><br />
                        檔案編號：<span id="last_update_dv"></span><br />
                        上傳日期：<span id="last_update_time"></span>
                    </p>
                    <h2 class="mdc-tooltip__title">關於此工具</h2>
                    <p class="mdc-tooltip__content">
                        作者：璇（<a class="mdc-tooltip__content-link" href="https://home.gamer.com.tw/merakx" target="_blank">merakx</a>）<br />
                        資料拆包：晴空和聲（<a class="mdc-tooltip__content-link" href="https://home.gamer.com.tw/jtdjdu6868" target="_blank">jtdjdu6868</a>）<br />
                        使用說明：<a class="mdc-tooltip__content-link" href="https://home.gamer.com.tw/creationDetail.php?sn=5413965" target="_blank">文章連結</a><br />
                        部分舊版技能簡稱出自<a class="mdc-tooltip__content-link" href="https://tos.fandom.com/zh/wiki/%E9%97%9C%E5%8D%A1%E6%95%B5%E4%BA%BA%E6%8A%80%E8%83%BD/%E6%95%B5%E4%BA%BA%E6%8A%80%E8%83%BD%E5%88%97%E8%A1%A8?variant=zh-tw" target="_blank">中文維基</a>
                    </p>
                    <p class="mdc-tooltip__content">
                        請使用電腦瀏覽器以獲得最佳觀看體驗
                    </p>
                </div></div>
            </div>
        </header>
        <main>
            <div class="mdc-data-table mdc-data-table--sticky-header" id="es_table"><div class="mdc-data-table__table-container" id="table_container">
                <table class="mdc-data-table__table">
                    <thead>
                        <tr class="mdc-data-table__header-row">
                            <th class="mdc-data-table__header-cell col1" role="columnheader" scope="col">
                                編號
                            </th>
                            <th class="mdc-data-table__header-cell col2" role="columnheader" scope="col">
                                技能敘述<span style="margin: 0px 10px"></span><button onclick="document.querySelectorAll('td:nth-child(2)>details:not([open])').forEach(k => {k.open = true})">全部展開</button>
                            </th>
                            <th class="mdc-data-table__header-cell col3" role="columnheader" scope="col">
                                備註
                            </th>
                        </tr>
                    </thead>
                    <tbody class="mdc-data-table__content" id="es_table_content">
                        <tr class="mdc-data-table__row">
                            <td class="mdc-data-table__cell">
                                0
                            </td>
                            <td class="mdc-data-table__cell">
                                <details>
                                    <summary>沒有技能</summary>
                                    沒有技能
                                </details>
                            </td>
                            <td class="mdc-data-table__cell"></td>
                        </tr>
                    </tbody>
                </table>
            </div></div>
        </main>
        <script>
            const filter_input = mdc.textField.MDCTextField.attachTo(document.getElementById('filter_input'));
            const filter_preset = mdc.select.MDCSelect.attachTo(document.getElementById('filter_preset'));
            mdc.dataTable.MDCDataTable.attachTo(document.getElementById('es_table'));
            const es_table = document.getElementById('es_table_content');
            mdc.iconButton.MDCIconButtonToggle.attachTo(document.getElementById('info_icon'));
            mdc.tooltip.MDCTooltip.attachTo(document.getElementById('info_tooltip'));
            mdc.ripple.MDCRipple.attachTo(document.getElementById('button_search'));

            filter_preset.listen('MDCSelect:change', e => {
                if(e.detail.index > 0) {
                    filter_input.value = e.detail.value;
                }
            });
            filter_input.input.addEventListener('input', e => {
                filter_preset.selectedIndex = 0;
            });
        </script>
    </body>
</html>
